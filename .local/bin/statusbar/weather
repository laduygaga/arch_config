#!/bin/sh
curl -s "vi.wttr.in/hanoi?1?T" > /tmp/getweather
low=`cat /tmp/getweather| sed -n 4p | rev | cut -d "." -f3 | rev ` # | cut -d " " -f1 | rev `
high=`cat /tmp/getweather| sed -n 4p | rev | cut -d "." -f1 | rev `


getrain() { printf "%s" "$(sed '16q;d' "/tmp/getweather" | grep -wo "[0-9]*%" | sort -n | sed -e '$!d' | sed -e "s/^/☔/g" | tr -d '\n')"
}
rain=$(getrain)

state=`cat /tmp/getweather | sed -n 3p | rev | cut -d " " -f1-3 | rev`
echo$state:  $rain ❄️ $low °C 🌞$high
